@model Apartments_io.ViewModels.Home.LoginViewModel

<div class="row log-in-container">
    <form data-url="@Url.Action("Login", "Home")" id="login-form" class="w-100">
        <h4 class="text-center mb-5">
            Welcome
        </h4>
        <span class="login100-form-title p-b-48">
            <i class="zmdi zmdi-font"></i>
        </span>

        <div>
            <div class="form-group">
                <p>Email</p>
                <input type="email" id="email-input" class="form-control" required />
            </div>
            <div class="form-group">
                <p>Password</p>
                <input type="password" id="password-input" class="form-control" required />
            </div>
            <div class="form-group">
                <input type="submit" value="Enter" class="btn btn-primary w-100" />
            </div>
        </div>
    </form>
</div>

@section Scripts
    {
    <script>
        $('#login-form').submit(function (event) {

            event.preventDefault();

            // gather data
            var form = this;
            const email = $(form).find("#email-input").val().trim();
            const password = $(form).find("#password-input").val().trim()

            // validate
            if (!is_email_valid(email))
            {
                ohSnap('Email is not valid', { color: 'red' });
                return;
            }

            // send request
            $.ajax({
                url: $(form).data('url'),
                type: 'POST',
                data: {
                    Email: email,
                    Password: password
                },
                error: function (respone)
                {
                    ohSnap(respone.responseText, { color: 'red' });
                },
                success: function (respone) {
                    location.reload();
                }
                
            });


        });

    </script>
}