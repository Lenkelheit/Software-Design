@model Apartments_io.ViewModels.Home.LoginViewModel

<form data-url="@Url.Action("Login", "Home")" id="login-form">
    <div>
        <div class="form-group">
            <p>Email</p>
            <input type="text" id="email-input" required />
        </div>
        <div class="form-group">
            <p>Password</p>
            <input type="password" id="password-input" required />
        </div>
        <div class="form-group">
            <input type="submit" value="Войти" class="btn" />
        </div>
    </div>
</form>

@section Scripts
    {
    <script>
        $('#login-form').submit(function (event) {

            event.preventDefault();

            // gather data
            var form = this;
            const email = $(form).find("#email-input").val().trim();
            const password = $(form).find("#password-input").val().trim()

            // validate
            if (!is_email_valid(email)) {
                alert("email is not valid");
                return;
            }

            // send request
            $.ajax({
                url: $(form).data('url'),
                type: 'POST',
                data: {
                    Email: email,
                    Password: password
                },
                error: function (respone) {
                    alert(respone.responseText);
                },
                success: function (respone) {
                    location.reload();
                }
                
            });


        });

    </script>
}